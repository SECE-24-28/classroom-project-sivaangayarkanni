<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Mobile Recharge App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: 
                linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.9) 50%, rgba(51, 65, 85, 0.85) 100%),
                url('https://images.unsplash.com/photo-1563013544-824ae1b704d3?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%),
                repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px);
            pointer-events: none;
            z-index: 0;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1), 
                0 0 0 1px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(15px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 1;
            animation: slideUp 0.8s ease-out;
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
            border-radius: 20px;
            pointer-events: none;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .gradient-text {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .btn-gradient {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            transition: all 0.3s ease;
        }
        .btn-gradient:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        .header-gradient {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        .balance-card {
            background: linear-gradient(135deg, #065f46 0%, #047857 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }
        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.2; }
        }
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .floating-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: floatCircle 8s infinite ease-in-out;
        }
        .floating-circle:nth-child(1) {
            width: 100px;
            height: 100px;
            top: 15%;
            left: 5%;
            animation-delay: 0s;
        }
        .floating-circle:nth-child(2) {
            width: 150px;
            height: 150px;
            top: 50%;
            right: 5%;
            animation-delay: 2s;
        }
        .floating-circle:nth-child(3) {
            width: 80px;
            height: 80px;
            bottom: 15%;
            left: 15%;
            animation-delay: 4s;
        }
        @keyframes floatCircle {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-25px) rotate(180deg); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <div class="floating-elements">
        <div class="floating-circle"></div>
        <div class="floating-circle"></div>
        <div class="floating-circle"></div>
    </div>
    <header class="header-gradient text-white p-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold flex items-center">
                <i class="fas fa-mobile-alt mr-2"></i>
                Mobile Recharge App
            </h1>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="index.html" class="hover:underline flex items-center"><i class="fas fa-home mr-1"></i>Home</a></li>
                    <li><a href="recharge.html" class="hover:underline flex items-center"><i class="fas fa-bolt mr-1"></i>Recharge</a></li>
                    <li><a href="subscriptions.html" class="hover:underline flex items-center"><i class="fas fa-crown mr-1"></i>Premium</a></li>
                    <li><a href="analytics.html" class="hover:underline flex items-center"><i class="fas fa-chart-bar mr-1"></i>Analytics</a></li>
                    <li><a href="login.html" class="hover:underline flex items-center"><i class="fas fa-sign-out-alt mr-1"></i>Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main class="flex-grow p-4">
        <div class="container mx-auto max-w-6xl">
            <!-- Premium Status Banner -->
            <section class="card p-4 mb-6 bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-black">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <i class="fas fa-crown text-2xl mr-3"></i>
                        <div>
                            <h3 class="font-bold text-lg">Premium Plus Member</h3>
                            <p class="text-sm opacity-80">Enjoy unlimited recharges and exclusive benefits</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-sm">Next billing: Dec 15, 2024</p>
                        <a href="subscriptions.html" class="text-sm underline font-semibold">Manage Subscription</a>
                    </div>
                </div>
            </section>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <section class="card p-6 lg:col-span-2">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center mr-4">
                            <i class="fas fa-user text-white text-xl"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-semibold gradient-text">Welcome Back, John!</h2>
                            <p class="text-gray-600">Manage your mobile recharges and subscriptions</p>
                        </div>
                    </div>
                    <div class="flex space-x-4">
                        <a href="recharge.html" class="btn-gradient text-white py-3 px-6 rounded-lg inline-flex items-center font-semibold">
                            <i class="fas fa-bolt mr-2"></i>
                            Quick Recharge
                        </a>
                        <button onclick="setupAutoRecharge()" class="bg-emerald-600 hover:bg-emerald-700 text-white py-3 px-6 rounded-lg inline-flex items-center font-semibold transition-colors">
                            <i class="fas fa-sync mr-2"></i>
                            Auto Recharge
                        </button>
                    </div>
                </section>
                <section class="balance-card p-6 rounded-20">
                    <div class="text-center">
                        <i class="fas fa-wallet text-3xl mb-3"></i>
                        <h3 class="text-lg font-semibold mb-2">Account Balance</h3>
                        <p class="text-3xl font-bold">₹500</p>
                        <p class="text-sm opacity-80 mt-2">Available for recharge</p>
                        <button onclick="addMoney()" class="mt-3 bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                            <i class="fas fa-plus mr-1"></i>Add Money
                        </button>
                    </div>
                </section>
            </div>

            <!-- Quick Actions -->
            <section class="card p-6 mb-6">
                <h3 class="text-xl font-semibold gradient-text mb-4">Quick Actions</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="quickRecharge('last')" class="p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all">
                        <i class="fas fa-redo text-2xl mb-2"></i>
                        <p class="text-sm font-semibold">Repeat Last</p>
                    </button>
                    <button onclick="viewOffers()" class="p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all">
                        <i class="fas fa-gift text-2xl mb-2"></i>
                        <p class="text-sm font-semibold">Special Offers</p>
                    </button>
                    <button onclick="viewBills()" class="p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all">
                        <i class="fas fa-file-invoice text-2xl mb-2"></i>
                        <p class="text-sm font-semibold">Pay Bills</p>
                    </button>
                    <button onclick="referFriend()" class="p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all">
                        <i class="fas fa-user-friends text-2xl mb-2"></i>
                        <p class="text-sm font-semibold">Refer & Earn</p>
                    </button>
                </div>
            </section>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <section class="card p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center">
                            <i class="fas fa-history text-2xl text-slate-700 mr-3"></i>
                            <h3 class="text-xl font-semibold gradient-text">Recent Transactions</h3>
                        </div>
                        <a href="#" class="text-sm text-slate-600 hover:text-slate-800">View All</a>
                    </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full table-auto">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mobile Number</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plan</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-2 whitespace-nowrap">2023-10-01</td>
                                <td class="px-4 py-2 whitespace-nowrap">9876543210</td>
                                <td class="px-4 py-2 whitespace-nowrap">₹199 Plan</td>
                                <td class="px-4 py-2 whitespace-nowrap">₹199</td>
                                <td class="px-4 py-2 whitespace-nowrap"><span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold flex items-center w-fit"><i class="fas fa-check-circle mr-1"></i>Success</span></td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 whitespace-nowrap">2023-09-15</td>
                                <td class="px-4 py-2 whitespace-nowrap">9876543210</td>
                                <td class="px-4 py-2 whitespace-nowrap">₹299 Plan</td>
                                <td class="px-4 py-2 whitespace-nowrap">₹299</td>
                                <td class="px-4 py-2 whitespace-nowrap"><span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold flex items-center w-fit"><i class="fas fa-check-circle mr-1"></i>Success</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                </section>

                <section class="card p-6">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-bell text-2xl text-slate-700 mr-3"></i>
                        <h3 class="text-xl font-semibold gradient-text">Notifications</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="p-4 bg-green-50 border-l-4 border-green-500 rounded">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <p class="text-sm font-semibold">Recharge Successful</p>
                            </div>
                            <p class="text-xs text-gray-600 mt-1">₹199 recharged to 9876543210</p>
                        </div>
                        <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded">
                            <div class="flex items-center">
                                <i class="fas fa-gift text-blue-500 mr-2"></i>
                                <p class="text-sm font-semibold">Cashback Earned</p>
                            </div>
                            <p class="text-xs text-gray-600 mt-1">₹20 cashback credited to wallet</p>
                        </div>
                        <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded">
                            <div class="flex items-center">
                                <i class="fas fa-star text-yellow-500 mr-2"></i>
                                <p class="text-sm font-semibold">Premium Offer</p>
                            </div>
                            <p class="text-xs text-gray-600 mt-1">Get 50% off on next recharge</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
    <footer class="bg-gray-900 text-white p-4 text-center relative z-10">
        <p>&copy; 2024 Mobile Recharge App. All rights reserved.</p>
    </footer>

    <script src="api.js"></script>
    <script>
        async function setupAutoRecharge() {
            try {
                const result = await api.setupAutoRecharge({ enabled: true, threshold: 50, amount: 199 });
                if (result.success) {
                    showNotification('Auto-recharge setup successful!', 'success');
                } else {
                    showNotification('Failed to setup auto-recharge', 'error');
                }
            } catch (error) {
                showNotification('Auto-recharge setup failed', 'error');
            }
        }
        
        async function addMoney() {
            try {
                const result = await api.addMoney(500);
                if (result.success) {
                    showNotification(`Added ₹500 to wallet. New balance: ₹${result.newBalance}`, 'success');
                    // Update balance display
                    const balanceElement = document.querySelector('.balance-card p.text-3xl');
                    if (balanceElement) {
                        balanceElement.textContent = `₹${result.newBalance}`;
                    }
                } else {
                    showNotification('Failed to add money', 'error');
                }
            } catch (error) {
                showNotification('Add money failed', 'error');
            }
        }
        
        function quickRecharge(type) {
            if (type === 'last') {
                showNotification('Redirecting to recharge page...', 'info');
                setTimeout(() => {
                    window.location.href = 'recharge.html';
                }, 1000);
            }
        }
        
        async function viewOffers() {
            try {
                const result = await api.getOffers();
                if (result.success) {
                    showNotification(`${result.offers.length} special offers available!`, 'info');
                    setTimeout(() => {
                        window.location.href = 'offers.html';
                    }, 1000);
                } else {
                    showNotification('Failed to load offers', 'error');
                }
            } catch (error) {
                showNotification('Offers unavailable', 'error');
            }
        }
        
        function viewBills() {
            showNotification('Bill payment feature coming soon!', 'info');
        }
        
        function referFriend() {
            showNotification('Refer a friend and earn ₹100!', 'info');
        }
        
        // Load user data on page load
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const userResult = await api.getUserProfile();
                if (userResult.success && userResult.user) {
                    const user = userResult.user;
                    
                    // Update user name
                    const nameElement = document.querySelector('h2.gradient-text');
                    if (nameElement) {
                        nameElement.textContent = `Welcome Back, ${user.name.split(' ')[0]}!`;
                    }
                    
                    // Update balance
                    const balanceElement = document.querySelector('.balance-card p.text-3xl');
                    if (balanceElement) {
                        balanceElement.textContent = `₹${user.balance}`;
                    }
                }
            } catch (error) {
                console.error('Failed to load user profile:', error);
            }
        });
    </script>
</body>
</html>